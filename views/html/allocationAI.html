<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Kode is a Premium Bootstrap Admin Template, It's responsive, clean coded and mobile friendly">
    <meta name="keywords" content="bootstrap, admin, dashboard, flat admin template, responsive," />

    <title>Church Ninja v1.0</title>

    <!-- ========== Css Files ========== -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="css/root.css" rel="stylesheet">
      
    <!-- <script src="js/jquery-3.3.1.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js" ></script>        
    <script src="js/socket.js" ></script> -->

    <script type="text/javascript" > 
    
    </script>
  </head>
  <body >
  <!-- Start Page Loading -->
  <div class="loading"><img src="img/loading.gif" alt="loading-img"></div>
  <!-- End Page Loading -->
 <!-- //////////////////////////////////////////////////////////////////////////// --> 
  <!-- START TOP -->
  <div id="top" class="clearfix">

    <!-- Start App Logo -->
    <div class="applogo">
      <a href="index.html" class="logo">Church Ninja v1.0</a>
    </div>
    <!-- End App Logo -->
    <h3 class="text-center" style="color: whitesmoke;"> Wings jobs distribution Intelligence </h3>

     
  </div>
  <!-- END TOP -->
 <!-- //////////////////////////////////////////////////////////////////////////// --> 


<!-- //////////////////////////////////////////////////////////////////////////// --> 
<!-- START SIDEBAR -->
<div class="sidebar clearfix">
  <ul class="sidebar-panel nav">
    <li class="sidetitle" > MAIN </li>
    
    <li  class='setup'><a href="#"><span class="icon color9"><i class=""></i></span>Front Office<span class="caret"></span></a>
      <ul>
        <li class='newclient'><a href="clients.html"><span class="icon color8"><i class="fa fa-users"></i></span>Member Setup</a></li>     
        <li class='newproject' ><a href="project.html"><span class="icon color5"><i class="fa fa-sign-in"></i></span>Clock-IN<span class="label label-default"></span></a></li>
        <li class='questionaire'><a href="questions.html"><span class="icon color6"><i class="fa fa-qrcode"></i></span>Allocate<span class="label label-default"></span></a></li>
        <li class='questionaire'><a href="questions.html"><span class="icon color6"><i class="fa fa-building"></i></span>Setup new wings<span class="label label-default"></span></a></li>
        <li class='questionaire'><a href="questions.html"><span class="icon color6"><i class="fa fa-users"></i></span>Setup new Group<span class="label label-default"></span></a></li>
        <li class='questionaire'><a href="questions.html"><span class="icon color6"><i class="fa fa-user"></i></span>Setup new Unit<span class="label label-default"></span></a></li>
        <li class='questionaire'><a href="allocationAI.html"><span class="icon color6"><i class="fa fa-location-arrow"></i></span> Allocation AI<span class="label label-default"></span></a></li>
      </ul>  
    </li>
       
  
    <li  class='report'><a href="#"><span class="icon color9"><i class=""></i></span> Report Module<span class="caret"></span></a>
      <ul class="">
          <li ><a href="timetable.html"><span class="icon color8 "><i class="fa fa-calendar" style=""></i></span> Time Tabler</a></li>
      
        <li ><a href="datatable.html"><span class="icon color8 "><i class="fa fa-database" style=""></i></span>Raw Data</a></li>
        <li><a href="graphtable.html"><span class="icon color8"><i class="fa fa-bar-chart"></i></span>Graphical Data</a></li>
      </ul>
    </li>
    
    <!-- <li><a href="support.html"><span class="icon color8"><i class="fa fa-life-ring"></i></span>Support Tickets</a></li>     
    <li><a href="dbsockExcel.html"><span class="icon color8"><i class="fa fa-excel-o" aria-hidden="true"></i></span>Import Excel Data</a></li>      -->
    <li><a href="/"><span class="icon color8"><i class="fa fa-sign-out" aria-hidden="true"></i></span>Exit Application</a></li>     
  
  </ul>
  
  
</div>
<!-- END SIDEBAR -->
<!-- //////////////////////////////////////////////////////////////////////////// --> 

 <!-- //////////////////////////////////////////////////////////////////////////// --> 
<!-- START CONTENT -->
<div class="content">

  
 <!-- //////////////////////////////////////////////////////////////////////////// --> 
<!-- START CONTAINER -->
<div class="container-widget">
  
  <!-- Start Fifth Row -->
  <div class="row">

    <!-- Start Project Stats -->

    <div class="container" id="about">
        <input type="hidden" class="projectid" >
          
        <!-- <div class="holder" > -->
             
            <div class="row col-md-4" id="r22" >
                <!-- <h2 class="text-center">Project Questions Setup</h2> -->
                <form method="GET" action="/board.html">
                    <div id="errmsg" style="height: auto; font-size: 20px; font-weight: bold; text-align: center; color: #f50"></div>
                    <input type="hidden" name="usermail" id="usermail"  >

                    <div class="form-group col-md-12">
                        <label for="year" class="col-md-5" > Year. </label>
                        <input class="form-control col-md-7" type="number" name="year" id="year" value="0">
                    </div>
                
                  
                    <div class="form-group col-md-12">
                        <label for="month" class="col-md-5" > Select Month </label>
                        <select class="form-control col-md-7" id="month" name="month" onchange="getExistingData(this.value)">
                             <option value="0">Please, select Month.....</option>
                             <option value="1">January</option>
                             <option value="2">February</option>
                             <option value="3">March</option>
                             <option value="4">April</option>
                             <option value="5">May</option>
                             <option value="6">June</option>
                             <option value="7">July</option>
                             <option value="8">August</option>
                             <option value="9">September</option>
                             <option value="10">October</option>
                             <option value="11">November</option>
                             <option value="12">December</option>
                        </select>                            
                    </div>

                    
                    <div class="form-group col-md-12">
                        <label for="wing" class="col-md-5" > Select Wing</label>
                        <select class="form-control col-md-7" name="wing" id="wing"></select>
                    </div>
                    
                    <div class="form-group col-md-12">
                        <label for="group" class="col-md-5" > Select Group</label>
                        <select class="form-control col-md-7" name="group" id="group"></select>
                    </div>
                  


                    <div class="form-group col-md-12">
                      <label for="projectid" class="col-md-5" > Select Service </label>
                      <select class="form-control col-md-7" id="service" name="service"  >
                        <option value="0">Please, select a service.....</option>
                        <option value="1">First Service</option>
                        <option value="2">Second Service</option>
                        <option value="3">Third Service</option>
                        <option value="4">Fourth Service</option>
                      </select>                            
                    </div>
                    
                    <div class="form-group col-md-12" >
                        <button type="button" id="save" class="btn btn-success" onclick="addallocatorAI()" > Submit </button>    
                        <button type="submit" class="btn btn-primary" > Close </button>
                    </div>
                    
                </form>

            </div>

            <!-- <div class="row" style="text-align: center">
              
            </div> -->

            <div class="row col-md-8" style="width: 600px">
              <!-- <button type="button" class="btn btn-success"  id="save" onclick="" ><i class="fa fa-files-o" > Copy Projects Qestions</i>  </button>     -->
              <!-- <button type="button" class="btn btn-primary" > <i class="fa fa-file-excel-o" aria-hidden="true">Upload from Excel</i> </button> -->
              <!-- <button type="submit" class="btn btn-danger" > <i class="fa fa-list-ol" aria-hidden="true">Rearrange Questionaire</i> </button> -->

            </div>

            <div class="row col-md-8 hidden" id="r3" style="height: 400px; overflow: scroll; width: 600px" >
              
              <h3 style="text-align: center; background-color: #6F4E37; color: #ffffff">Existing Data: <p id='questtotal'></p></h3> 

              <div class="table-responsive" style="width: auto; background-color: whitesmoke; overflow: scroll" id="result">

              </div> 
              
            </div>
 
    </div><!-- end of content -->

     
    <div class="modal fade" id="addConditions" role="modal" style="width: 1000px">
        <div class="modal-dialog modal-lg" title="Add Conditions to various questions" style="width: 900px" >
            <div class="modal-content">
                <input type="hidden" class="refnos2" >
                <input type="hidden" id="quest2" >
                
                <input type="hidden" id="questno" >
                <!-- <input type="hidden" id="currentuser" > -->

                <div class="modal-header" style="padding: 15px 40px; background-color: antiquewhite">
                    <button type="button" class="close" data-dismiss="modal" >&times;</button>
                    <h4 style="text-align: center">Add Conditions to various questions Choices.</h4>
                    <div style="text-align: center; font-size: 24px; font-weight: bolder; font-family: 'Times New Roman', Times, serif" id="question_txt"></div> 
                    
                </div>

                <div class="modal-body" style="height: 300px; overflow: scroll ">
                    
                    <input type="hidden" id="choiceid" >

                    <div class="col-md-12 nontxt hidden"  >
                        <div class="form-group col-md-6">
                            <label for="projectid" class="col-md-5" > If user picks  </label>
                            <select class="form-control col-md-7" id="option_id" name="option_id" onchange="mapExistingSelection(this.value)" >
                                 
                            </select>                            
                        </div>
                        
                        <div class="form-group col-md-6">
                            <label for="projectid" class="col-md-5" > Select SKIP question </label>
                            <select class="form-control col-md-7" id="question_id" name="question_id">
                                 
                            </select>                            
                        </div>
                        
                        <div id="resu" class=""></div>

                        <!-- <table id="conditiontbl" class="table table-hover" style="overflow: scroll">

                        </table> -->
                    </div>

                    <div class="col-md-12 txt hidden">
                      <h3 style="text-align: center; background-color: lightskyblue;">Control Minimum and Maximum length of Characters.</h3>
                        <div class="form-group col-md-12">
                            <label for="projectid" class="col-md-5" > Min. Characters. </label>
                            <input class="form-control col-md-7" type="number" name="minxter" id="minxter" value="0">
                        </div>
                        
                        <div class="form-group col-md-12">
                            <label for="projectid" class="col-md-5" > Max. Characters. </label>
                            <input class="form-control col-md-7" type="number" name="maxxter" id="maxxter" value="0">
                        </div>
                        

                    </div>
                    <div class="col-md-12 num hidden">
                      
                      <div class="col-md-12">
                          
                        <h3 style="text-align: center; background-color: lightskyblue;">Control Minimum and Maximum values allowed.</h3>
                      
                        <div class="form-group col-md-12">
                            <label for="projectid" class="col-md-5" > Min. Characters. </label>
                            <input class="form-control col-md-7" type="number" name="minvalue" id="minvalue" value="0">
                        </div>
                        
                        <div class="form-group col-md-12">
                            <label for="projectid" class="col-md-5" > Max. Characters. </label>
                            <input class="form-control col-md-7" type="number" name="maxvalue" id="maxvalue" value="0">
                        </div>
                          
                      </div>
                      <!-- <div class="col-md-6">
                          
                        <h3>Control Minimum and Maximum values allowed.</h3>
                      
                        <div class="form-group col-md-12">
                            <label for="projectid" class="col-md-5" > Min. Characters. </label>
                            <input type="number" name="minxter2" id="minxter2" value="0">
                        </div>
                        
                        <div class="form-group col-md-12">
                            <label for="projectid" class="col-md-5" > Max. Characters. </label>
                            <input type="number" name="maxxter2" id="maxxter2" value="0">
                        </div>
                          
                      </div> -->

                        

                    </div>


                    <!-- <div class="form-group-sm col-md-12 res hidden" style="overflow-y: scroll; height: 100px" >

                    </div> -->

                </div>

                <div class="modal-footer" style="background-color: antiquewhite">
                    <button type="button" class="btn btn-success rounded" onclick="saveCondition()" id="condition" ><i class="fa fa-database" ></i>Submit</button>
                    <button type="button" class="btn btn-primary" data-toggle='tooltip' title='Close window' id="closer"  data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>

    <div class="modal fade" id="pushtodisplay" role="modal" style="width: 1000px">
        <div class="modal-dialog modal-lg" title="Add expected Options for questions" style="width: 900px">
            <div class="modal-content">
                <input type="hidden" class="refnos" >
                <input type="hidden" id="quest" >
                <!-- <input type="hidden" id="currentuser" > -->

                <div class="modal-header" style="padding: 15px 40px; background-color: antiquewhite; color: #fff; font-weight: bolder">
                    <button type="button" class="close" data-dismiss="modal" >&times;</button>
                    <h4 style="color: #000; text-align: center" ><span>Add Options for questions</h4>
                </div>

                <div class="modal-body" style="height: 380px; background-color: whitesmoke">
                    <div class="col-md-12">
                        <!-- <label for="teler1" class="form-label col-md-5" style="font-size: 22px" >Your Question</label>  -->
                        <div class="col-md-12" >
                            <div class="q1 col-md-12" data-toggle="tooltip" readonly  style="font-weight: bolder; font-size: 18px; text-align: center"></div>
                        </div>
                    </div> 
                    
                    <div class="col-md-6" style="background-color: whitesmoke">
                        <!-- <h4 >Add Options</h4> -->
                        <div class="form-group col-md-12">
                            <label for="edate" class="col-md-4" >Response Text</label>
                            <input type="text" name="response" id="response" autocomplete="off" class="form-control col-md-8" placeholder="Enter Choice text to be seen by users...">                            
                        </div>

                        <div class="form-group col-md-12">
                            <label for="teler1" class="form-label col-md-5" style="font-size: 16px" >Choice Type</label> 
                            
                            <select name="c_type" id="c_type" class="form-control col-md-7" >
                              <option value="0"   > Select Choice display type</option>
                              <option value="txt" > Text Input  </option>
                              <option value="num" > Number Input</option>
                              <option value="dat" > Date Input</option>
                              <option value="mul" > Multiline Input</option>
                              <option value="sel" > Drop Down List box</option>
                              
                              <option value="rad" > Radio button</option>
                              <option value="chk" > Check boxes </option>
                              <option value="img" > Image Picker</option>
                              <option value="aud" > Audio Recorder</option>
                              <option value="vid" > Video Recorder</option>
                            </select>
                        </div>

                        <div class="form-group col-md-12">
                          <label for="edate" class="col-md-12" > Copy Options IN</label>
                          <select id="o_q_id" class="form-control col-md-5" ></select>
                          <button type="button" name="copyoptions" id="copyoptions" class="btn btn-primary" onclick="copyOptions()" ><i class="fa fa-files-o"></i></button>
                        </div>

                        <div class="form-group col-md-12 hidden">
                          <label for="edate" class="col-md-4" > Manifesto LInk</label>
                          <input type="text" name="urllink" id="urllink" autocomplete="off" class="form-control col-md-8" placeholder="Enter candidate URL...">

                        </div>

                    </div>

                    <div class='col-md-6 pull-left' >
                        <p class="col-md-12" ><h5>Question Current Options</h5></p>
                        <div id="choices" class="form-group col-md-12" style="background-color: transparent; height: 280px; overflow: scroll" > 
                            
                        </div> 
                    </div>
                    
                </div>

                <div class="modal-footer" style="background-color: antiquewhite">
                    <button type="button" class="btn btn-primary btn-group-sm rounded" onclick="saveChoices()" id="pusher" ><i class="fa fa-database" ></i>Submit</button>
                    <button type="button" class="btn btn-danger btn-orange" data-toggle='tooltip' title='Close window' id="closer"  data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
      <!-- Start Project Stats -->
       
<!-- End Fifth Row -->

</div>
<!-- END CONTAINER -->
 <!-- //////////////////////////////////////////////////////////////////////////// --> 

</div>
<!-- End Content -->
 <!-- //////////////////////////////////////////////////////////////////////////// --> 
<!-- //////////////////////////////////////////////////////////////////////////// --> 
 
<!-- ================================================
jQuery Library
================================================ -->
<script type="text/javascript" src="js/jquery.min.js"></script>

<script>
  var user = localStorage.getItem('userid');
  var role = localStorage.getItem('roleId');

  // alert(user)
  $('#usermail').val(user);

  $(document).ready(function() {
    var user = $('#usermail').val();
    // alert(user);

    $.ajax({
      url: "/getprojectslist",
      data: "user="+user+"&role="+role,
      type: "get",
      cache: false,
      success: function(data){
        // alert(data)
        $('#projectid').html(data);
      },
      error: function(data){
        // alert(data);
      },
      dataType: "text"
    });

  });

  function setSelectedIndex(s, valsearch)
  {
    // Loop through all the items in drop down list
    // alert(s)
    // alert(valsearch)
    
    for (var i = 0; i < s.options.length; i++)
    { 
        if (s.options[i].value == valsearch)
        {
            // Item is found. Set its property and exit
            s.options[i].selected = true;
            break;
        }
    }
    // alert('dele')
    return;
  }


  var getchoices = (opt_id, gotoquestion) => {
    // alert(opt_id+":::"+gotoquestion )
    // swal(opt_id)
    // $('#choiceid').val(id)
    // $('#condition').attr('disabled', false);

    // $.ajax({
    //   url: "/updatecondition",
    //   data: "option="+opt_id+"&gotoquestion="+gotoquestion,
    //   type: "get",
    //   cache: false,
    //   success: function(data){
    //     swal('condition', data, 'success');
    //     // $('#projectid').html(data);
    //   },
    //   error: function(data){
    //     swal("Error: "+data);
    //   },
    //   dataType: "text"
    // });


  }

  var copyOptions = () => {
    var c_to = $('.refnos').val(); 
    var c_from = $('#o_q_id').val();

    $.ajax({
      url: "/copyoptions",
      data: "cfrom="+c_from+"&cto="+c_to,
      type: "get",
      cache: false,
      success: function(data) {
        // display all copied options
        var str;
        var str ="<table class='table table-hover' >";
        for(var xx=0; xx < data.length; xx++){
            var y = xx + 1;
            
            str += '<tr  >' + '<td style="text-align: left; font-size: 14px">'+ y +' </td> <td style="text-align: left; font-size: 14px" >' + data[xx].response_text + '</td> <td><button class="btn btn-primary" id="'+ data[xx].refnos +'" name="'+ data[xx].response_text +'" onclick="deleteOptions(this.id, this.name)" >Delete</button></td>  </tr>';
        }
        str += "</table>";

        $('#choices').html(str);



        console.log(data);
        
      },
      error: function(data) {
        alert(data);
      },
      dataType: "json"
    })
  }

  var getExistingData = (id) => {
    $('#r3').removeClass('hidden');

    var year = $('#year').val();
    
    if(year==0){
      alert('Please, enter current year');
      return;
    }
    
    $.ajax({
      url: "/getexistingdata",
      data: "month="+id+"&year="+year,
      type: "get",
      cache: false,
      success: function(data) {
        console.log(data);
        // alert(data)
        // var arr = data.split('$');
        // alert(arr[3])
        $('#wing').html(data.wing);
        $('#group').html(data.group);
        $('#result').html(data.str);
      },
      error: function(data) {
        alert(data);
      },
      dataType: "json"
    })  
  };

  var editQuestion = (id) => {
    $.ajax({
      url: "/editquestion",
      data: "questionid="+id,
      cache: false, 
      type: "GET",
      success: (data) => {
        alert(data);
      },
      error: (data) => {

      }

    });

  };

  var addQuestion = (inserObject) => {


  }

  var saver = (id) => {
    swal(id)
    swal($('#restext').val());
  }

  var showquest = (id) => {
    // swal(id);
    var htmlObj = document.getElementById('restext');

    console.log(id);
    console.log(htmlObj);

    setSelectedIndex(htmlObj, id);
  };

  var questionCondition = (id, question) => {
    $('#questno').val(id);
    $('#question_txt').html(question);

    alert(id);
    alert(question);

    var projectid = $('#projectid').val();

    // alert(projectid)

    /** START the Question option condition here */

    $("#addConditions").modal({
        backdrop: 'static',
        keyboard: false
    });
    

    $.ajax({
      url: "/setQuestionCondition",
      data: "questionid="+id+"&projectid="+projectid,
      cache: false, 
      type: "GET",
      success: (data) => {
        // alert(data)
        console.log(data);

        var options   = data.options;
        var questions = data.question;
        var coltype   = data.colType;
        var opt_res   = data.values;
        
        // console.log(options);
        // console.log(questions);

        $('#option_id').html(options);
        $('#question_id').html(questions);
        $('#resu').html(data.responseText);

        optionId = data.optionId;
        
        // console.log(optionId);

        localStorage.setItem('coltype', coltype);
        localStorage.setItem('optionId', optionId); //This will be used to manage txt, num and the likes  in terms of client management

        if(coltype=='txt') {
          $('.txt').removeClass('hidden');
          $('.nontxt').addClass('hidden');
          $('.num').addClass('hidden');
        } else if(coltype!=='txt' && coltype !=='num') {
          $('.txt').addClass('hidden');
          $('.nontxt').removeClass('hidden');
          $('.num').addClass('hidden');
        } else if(coltype=='num') {
          $('.txt').addClass('hidden');
          $('.nontxt').addClass('hidden');
          $('.num').removeClass('hidden');

          opt_res.forEach((rec)=>{
            var min = rec.min_v;
            var max = rec.max_v;

            $('#minvalue').val(min);
            $('#maxvalue').val(max);
          })

        }
        
        // else if(coltype=='chk'){
        //   $('.txt').addClass('hidden');
        //   $('.nontxt').addClass('hidden');
        //   $('.num').removeClass('hidden');
        // }
        
        // alert(coltype);
      },
      error: (err) => {
alert(err.statusText)
      },
      dataType: "JSON"

    });

  }

  var deleteCombo = (id) => {

    var x = confirm('Are you Sure You want to delete question ???');
    if(x){
      
      $.ajax({
        url: "/deleteCombo",
        data: "questionid="+id,
        cache: false, 
        type: "GET",
        success: (data) => {
          console.log(data);
          if(data.affectedRows > 0){
            alert('Delete','Record deleted successfully...', 'information');
          }
          console.log(data)
        },
        error: (err) => {
          alert(err)
        },
        datatype: "JSON"

      });

    }
  }

  var postproject = () => {
    var usermail = $('#usermail').val();
    var title = $('#title').val();
    var start_date = $('#sdate').val();
    var end_date = $('#edate').val();
    var reason = $('#reason').val();

    // alert(usermail);

    $.ajax({
        url: "/newproject",
        data: "usermail="+usermail+"&title="+title+"&sdate="+start_date+"&edate"+end_date+"&reason="+reason,
        cache: false,
        type: "GET",
        success: function(data){
            $('#tbl').html(data);
        },
        error: function(data){
            alert(data);
        },
        datatype: "text"
    });


  }
 
  var openoptions = (id, question) => {
     $(".refnos").val(id);
      $(".q1").val(question);
    $("#pushtodisplay").modal({
        backdrop: 'static',
        keyboard: false
    });

    $.ajax({
        url: "/getquestionoptions",
        type: "GET",
        cache: false,
        data: "questionId="+id , 
        success: function(data){ 

          var questionOptions = '<table class="table table-bordered">';
            questionOptions+= '<tr style="background-color: lightskyblue; color: whitesmoked; font-weight: bolder; font-size: 18px" ><td>S/N</td><td>Placeholder</td><td>Option Type</td><td></td></tr>'

          data.forEach(function(el, xx) {
            var y = xx + 1;
            var coltype = data[xx].coltype;
            if(coltype=='num') {
              coltype="Number Input";
            }
            else if(coltype=='rad'){
              coltype="Radio";
            }
            else if(coltype=='chk'){
              coltype="Checkbox";
            }
            else if(coltype=='txt'){
              coltype="Text Input";
            }
            else if(coltype=='img' || coltype=='vid' || coltype=='aud') {
              coltype="Media Processor";
            }
            
            questionOptions += '<tr  >' + '<td style="text-align: left; font-size: 14px">'+ y +' </td> <td style="text-align: left; font-size: 14px" >' + data[xx].response_text + '</td><td style="text-align: left; font-size: 14px" >' + coltype + '</td> <td><button class="btn btn-primary" id="'+ data[xx].refnos +'" name="'+ data[xx].response_text +'" onclick="deleteOptions(this.id, this.name)" >Deleted</button></td>  </tr>';
            // questionOptions += '<tr  >' + '<td style="text-align: left; font-size: 14px">'+ y +' </td> <td style="text-align: left; font-size: 14px" >' + data[xx].response_text + '</td> <td style="text-align: left; font-size: 14px" >' + data[xx].optionURL + '</td> <td><button class="btn btn-primary" id="'+ data[xx].refnos +'" name="'+ data[xx].response_text +'" onclick="deleteOptions(this.id, this.name)" >Delete</button></td>  </tr>';

            // questionOptions += '<td style><button class="btn btn-primary" id="' + data[xx].refnos + '" onclick="deleteOptions(this.id)" >Delete</button>'+ '<td>'+ data[xx].response_text + '</td>'; 
          })

          questionOptions += '</table>';
          
          $('#choices').html(questionOptions);

        },
        error: function(data){

        },
        datatype: "text"
    })
    var resultStr=""; // options.filter(option => option.)
 
}

  var addallocatorAI = () => {
    var year  = $('#year').val();
    var mth   = $('#month').val();
    var wing  = $('#wing').val();
    var group  = $('#group').val();
    var service  = $('#service').val();

    $.ajax({
        url: "/insertallocator",
        type: "GET",
        cache: false,
        data: "year="+year+"&mth="+mth+"&wing="+wing+"&group="+group+"&service="+service,
        success: function(data){  
            if(data.status=='error'){
              alert(data.error)
              console.log(data.error)
              return
            }else{
              $('#result').html(data.str);
            }

            $('#result').html(data.str);
            
            
        },
        error: function(data){

        },
        datatype: "json"
    })
    

  }

  var saveChoices = ()=>{
    // alert('Dele')
    // var projectRef = $("#project").val();
    var questionRef = $(".refnos").val();
    var choice = $("#response").val().trim();
    var urllink = $("#urllink").val().trim();
    var type = $("#c_type").val().trim(); 

    $.ajax({
        url: "/savechoice",
        type: "get",
        cache: false,
        data: "questionid="+questionRef+"&choice="+choice+"&type="+type+"&url="+urllink,
        success: function(data){

          // alert(data)
            var str;
            var str ="<table class='table table-hover' >";
            for(var xx=0; xx < data.length; xx++){
                var y = xx + 1;
                
                str += '<tr  >' + '<td style="text-align: left; font-size: 14px">'+ y +' </td> <td style="text-align: left; font-size: 14px" >' + data[xx].response_text + '</td> <td><button class="btn btn-primary" id="'+ data[xx].refnos +'" name="'+ data[xx].response_text +'" onclick="deleteOptions(this.id, this.name)" >Delete</button></td>  </tr>';
            }
            str += "</table>";

            $('#choices').html(str);

        },
        error: function(data){

        },
        datatype: "text"
    });
   
}

var saveCondition = () => {
  var user = localStorage.getItem('userid');
  var coltype = localStorage.getItem('coltype');

  if(coltype=='rad' || coltype=='chk') {
    var questionId = $('#questno').val();

    var optionId = $('#option_id').val();
    var gotoquestionId = $('#question_id').val();
 
    $.ajax({
        url: "/savecondition",
        type: "POST",
        cache: false,
        // data: {insertObject: dataObj},
        // data: dataObj,
        data: "user="+user+"&question_id="+questionId+"&option_id="+optionId+"&skipquestion_id="+gotoquestionId, //questno
        success: function(data){ 
          // alert(data);
            var str;
             console.log(data)
            $('#resu').html(data.resp);

        },
        error: function(data){

        },
        datatype: "JSON"
    })

  }else if(coltype=='txt') {
    var questionId = $('#questno').val();

    var optionId = localStorage.getItem('optionId');

    var min = $('#minxter').val();
    var max = $('#maxxter').val();

    $.ajax({
      url: "/saveconditiontxt",
        type: "POST",
        cache: false,
        // data: {insertObject: dataObj},
        // data: dataObj,
        data: "user="+user+"&question_id="+questionId+"&option_id="+optionId+"&min="+min+"&max="+max, //questno
        success: function(data) { 
            var str;
            swal("Saved", data.resp, "success");
            // $('#resu').html(data.resp);
        },
        error: function(data){

        },
        datatype: "JSON"
    })
  

  } else if(coltype=='num') {
    var questionId = $('#questno').val();

    var optionId = localStorage.getItem('optionId');

    var min = $('#minvalue').val();
    var max = $('#maxvalue').val();

    // alert(min)
    // alert(max)

    $.ajax({
      url: "/saveconditionnum",
        type: "POST",
        cache: false,
        // data: {insertObject: dataObj},
        // data: dataObj,
        data: "user="+user+"&question_id="+questionId+"&option_id="+optionId+"&min="+min+"&max="+max, //questno
        success: function(data) { 
            var str;
            swal("Saved", data.resp, "success");
            // $('#resu').html(data.resp);
        },
        error: function(data){

        },
        datatype: "JSON"
    })
  
  
  }
  
  


}


var mapExistingSelection = (selectedVal) => {
  // alert(selectedVal);
};

var deleteOptions = (id, name) => {
  var questionId = $('.refnos').val();
  // alert(id);
  // return
  $.ajax({
    url: "/deleteOption",
    data: "code="+id+"&questionid="+questionId,
    cache: false,
    type: "GET",
    success: function(data){

      
      $('#choices').html(data);

      // var y=0;
      // // alert(data)
      // var str ="<table class='table table-hover' >";
      //     for(var xx=0; xx < data.length; xx++){
      //         y = xx + 1;
              
      //         str += '<tr  >' + '<td style="text-align: left; font-size: 14px">'+ y +' </td> <td style="text-align: left; font-size: 14px" >' + data[xx].response_text + '</td> <td><button class="btn btn-primary" id="'+ data[xx].refnos +'" name="'+ data[xx].response_text +'" onclick="deleteOptions(this.id, this.name)" >Delete</button></td>  </tr>';
      //     }
      //     str += "</table>";

      //     $('#choices').html(str);

    },
    error: function(data){

    },
    dataType: "text"
  })

}


</script>

<!-- ================================================
Bootstrap Core JavaScript File
================================================ -->
<script src="js/bootstrap/bootstrap.min.js"></script>

<!-- ================================================
Plugin.js - Some Specific JS codes for Plugin Settings
================================================ -->
<script type="text/javascript" src="js/plugins.js"></script>

<!-- ================================================
Bootstrap Select
================================================ -->
<!-- <script type="text/javascript" src="js/bootstrap-select/bootstrap-select.js"></script> -->

<!-- ================================================
Bootstrap Toggle
================================================ -->
<!-- <script type="text/javascript" src="js/bootstrap-toggle/bootstrap-toggle.min.js"></script> -->

<!-- ================================================
Bootstrap WYSIHTML5
================================================ -->
<!-- main file -->
<!-- <script type="text/javascript" src="js/bootstrap-wysihtml5/wysihtml5-0.3.0.min.js"></script> -->
<!-- bootstrap file -->
<!-- <script type="text/javascript" src="js/bootstrap-wysihtml5/bootstrap-wysihtml5.js"></script> -->

<!-- ================================================
Summernote
================================================ -->
<!-- <script type="text/javascript" src="js/summernote/summernote.min.js"></script> -->

<!-- ================================================
Flot Chart
================================================ -->
<!-- main file -->
<!-- <script type="text/javascript" src="js/flot-chart/flot-chart.js"></script> -->
<!-- time.js -->
<!-- <script type="text/javascript" src="js/flot-chart/flot-chart-time.js"></script> -->
<!-- stack.js -->
<!-- <script type="text/javascript" src="js/flot-chart/flot-chart-stack.js"></script>/ -->
<!-- pie.js -->
<!-- <script type="text/javascript" src="js/flot-chart/flot-chart-pie.js"></script> -->
<!-- demo codes -->
<!-- <script type="text/javascript" src="js/flot-chart/flot-chart-plugin.js"></script> -->

<!-- ================================================
Chartist
================================================ -->
<!-- main file -->
<!-- <script type="text/javascript" src="js/chartist/chartist.js"></script> -->
<!-- demo codes -->
<!-- <script type="text/javascript" src="js/chartist/chartist-plugin.js"></script> -->

<!-- ================================================
Easy Pie Chart
================================================ -->
<!-- main file -->
<!-- <script type="text/javascript" src="js/easypiechart/easypiechart.js"></script> -->
<!-- demo codes -->
<!-- <script type="text/javascript" src="js/easypiechart/easypiechart-plugin.js"></script> -->

<!-- ================================================
Sparkline
================================================ -->
<!-- main file -->
<!-- <script type="text/javascript" src="js/sparkline/sparkline.js"></script> -->
<!-- demo codes -->
<!-- <script type="text/javascript" src="js/sparkline/sparkline-plugin.js"></script> -->

<!-- ================================================
Rickshaw
================================================ -->
<!-- d3 -->
<!-- <script src="js/rickshaw/d3.v3.js"></script> -->
<!-- main file -->
<!-- <script src="js/rickshaw/rickshaw.js"></script> -->
<!-- demo codes -->
<!-- <script src="js/rickshaw/rickshaw-plugin.js"></script> -->

<!-- ================================================
Data Tables
================================================ -->
<script src="js/datatables/datatables.min.js"></script>

<!-- ================================================
Sweet Alert
================================================ -->
<script src="js/sweet-alert/sweet-alert.min.js"></script>

<!-- ================================================
Kode Alert
================================================ -->
<script src="js/kode-alert/main.js"></script>

<!-- ================================================
Gmaps
================================================ -->
<!-- google maps api -->
<!-- <script src="http://maps.google.com/maps/api/js?sensor=true"></script> -->
<!-- main file -->
<!-- <script src="js/gmaps/gmaps.js"></script> -->
<!-- demo codes -->
<!-- <script src="js/gmaps/gmaps-plugin.js"></script> -->

<!-- ================================================
jQuery UI
================================================ -->
<!-- <script type="text/javascript" src="js/jquery-ui/jquery-ui.min.js"></script> -->

<!-- ================================================
Moment.js
================================================ -->
<!-- <script type="text/javascript" src="js/moment/moment.min.js"></script> -->

<!-- ================================================
Full Calendar
================================================ -->
<!-- <script type="text/javascript" src="js/full-calendar/fullcalendar.js"></script> -->

<!-- ================================================
Bootstrap Date Range Picker
================================================ -->
<!-- <script type="text/javascript" src="js/date-range-picker/daterangepicker.js"></script> -->
 

<!-- ================================================
Below codes are only for index widgets
================================================ -->
<!-- Today Sales -->
<script>
  
// set up our data series with 50 random data points

// var seriesData = [ [], [], [] ];
// var random = new Rickshaw.Fixtures.RandomData(20);

// for (var i = 0; i < 110; i++) {
//   random.addData(seriesData);
// }

// instantiate our graph!

// var graph = new Rickshaw.Graph( {
//   element: document.getElementById("todaysales"),
//   renderer: 'bar',
//   series: [
//     {
//       color: "#33577B",
//       data: seriesData[0],
//       name: 'Photodune'
//     }, {
//       color: "#77BBFF",
//       data: seriesData[1],
//       name: 'Themeforest'
//     }, {
//       color: "#C1E0FF",
//       data: seriesData[2],
//       name: 'Codecanyon'
//     }
//   ]
// } );

// graph.render();

// var hoverDetail = new Rickshaw.Graph.HoverDetail( {
//   graph: graph,
//   formatter: function(series, x, y) {
//     var date = '<span class="date">' + new Date(x * 1000).toUTCString() + '</span>';
//     var swatch = '<span class="detail_swatch" style="background-color: ' + series.color + '"></span>';
//     var content = swatch + series.name + ": " + parseInt(y) + '<br>' + date;
//     return content;
//   }
// } );

</script>

<!-- Today Activity -->
<script>
// set up our data series with 50 random data points

// var seriesData = [ [], [], [] ];
// var random = new Rickshaw.Fixtures.RandomData(20);

// for (var i = 0; i < 50; i++) {
//   random.addData(seriesData);
// }

// instantiate our graph!

// var graph = new Rickshaw.Graph( {
//   element: document.getElementById("todayactivity"),
//   renderer: 'area',
//   series: [
//     {
//       color: "#9A80B9",
//       data: seriesData[0],
//       name: 'London'
//     }, {
//       color: "#CDC0DC",
//       data: seriesData[1],
//       name: 'Tokyo'
//     }
//   ]
// } );

// graph.render();

// var hoverDetail = new Rickshaw.Graph.HoverDetail( {
//   graph: graph,
//   formatter: function(series, x, y) {
//     var date = '<span class="date">' + new Date(x * 1000).toUTCString() + '</span>';
//     var swatch = '<span class="detail_swatch" style="background-color: ' + series.color + '"></span>';
//     var content = swatch + series.name + ": " + parseInt(y) + '<br>' + date;
//     return content;
//   }
// } );

// var getdata = () => {
//     alert('dele')
// }
    


</script>



</body>
</html>